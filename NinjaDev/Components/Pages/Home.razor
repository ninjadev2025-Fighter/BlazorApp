@page "/"
@using System.Text.Json;
@inject IJSRuntime JS;

@rendermode InteractiveServer
<PageTitle>Home</PageTitle>



<h1>Hello, !</h1>










<section class="offer_section layout_padding-bottom">
    <div class="offer_container">
        <div class="container ">
            <div class="row">


                @foreach (var item in Categories)
                {
                    <div class="col-md-6  ">
                        <div class="box " style="border-radius:0px">
                            <div class="img-box">
                                <a href="/product/@item.Id/@item.Name" style="all:unset;cursor:pointer">
                                    <img src="@(!string.IsNullOrEmpty(item.ImageUrl) ? item.ImageUrl : "images/o1.jpg")" alt="@item.Name" style="object-fit:cover; width:100%; height:200px;" />
                                </a>
                            </div>
                            <div class="detail-box text-right">
                                <a href="/product/@item.Id/@item.Name" style="all:unset;cursor:pointer">
                                    <h2>
                                        @item.Name
                                    </h2>
                                </a>
                                <h6>
                                    @item.Description
                                </h6>
                                @if (item.CreatedAt != null)
                                {
                                    <h6>
                                        تم الانشاء فى
                                        @item.CreatedAt.Value.ToString("yyyy-MM-dd ")
                                    </h6>
                                }
                                @if (item.UpdatedAt != null)
                                {
                                    <h6>
                                        تعديل فى
                                        @item.UpdatedAt.Value.ToString("yyyy-MM-dd ")
                                    </h6>
                                }
                            </div>

                        </div>
                        <div class="box mt-0 text-center " style="border-radius:0px ">
                            <button class="btn btn-danger col-4 text-center m-3" @onclick="() => RemoveCategory(item)">حذف</button>
                            <button class="btn btn-primary col-4 text-center m-3" @onclick="() => EditCategory(item)">تعديل</button>
                        </div>

                    </div>
                }




            </div>
        </div>
    </div>
</section>



<section class="book_section layout_padding">
    <div class="container">

        <h2 class="text-center">
            Book A Table
        </h2>

        <div class="row">

            <div class="col-sm-3">
            </div>



            <div class="col-md-6">
                <div class="form_container">

                    <EditForm Model="NewCategory" OnValidSubmit="SaveCategory">

                        <DataAnnotationsValidator />

                        <div>
                            <InputText @bind-Value="NewCategory.Name" type="text" class="form-control text-right" placeholder="اسم الصنف" />
                            <ValidationMessage style="color:red" class="mb-4 text-right" For="@(() => NewCategory.Name)" />
                        </div>
                        <div>
                            <InputTextArea @bind-Value="NewCategory.Description" class="form-control text-right " placeholder="وصف الصنف" />
                            <ValidationMessage class="text-right" style="color:red" For="@(() => NewCategory.Description)" />
                        </div>







                        <div class="mt-3 text-right">
                            <label>رفع صورة القسم</label>
                            <InputFile OnChange="HandleFileSelected" />
                        </div>

                        @if (!string.IsNullOrEmpty(ImagePreview))
                        {
                            <div class="mt-2">
                                <img src="@ImagePreview" style="width:200px; height:200px; object-fit:contain; border:5px solid " />
                            </div>
                        }










                        <div class="btn_box text-center">
                            @if (isEditMode)
                            {
                                <button @onclick="Cancel" class="mr-3">
                                    الغاء
                                </button>
                            }
                            <button type="submit">
                                حفظ البيانات
                            </button>
                        </div>
                    </EditForm>

                </div>
            </div>

        </div>
    </div>
</section>









<section class="food_section layout_padding-bottom">
    <div class="container">
        <div class="heading_container heading_center">
            <h2>
                Our Menu
            </h2>
        </div>

        <ul class="filters_menu">
            <li @onclick="() => FilterCategory = new()">الكل</li>

            @foreach (var item in Categories)
            {
                <li @onclick="() => changeFilterCategory(item)">@item.Name</li>
            }
        </ul>

        <div class="filters-content">
            <div class="row grid">

                @foreach (var item in Products)
                {
                    @if (FilterCategory.Id == item.CategoryId || FilterCategory.Id == 0)
                    {
                        <div class="col-sm-6 col-lg-4 all">
                            <div class="box">
                                <div>
                                    <div class="img-box">
                                        <img src="images/f1.png" alt="">
                                    </div>
                                    <div class="detail-box">
                                        <h5>
                                            @item.Name
                                        </h5>
                                        <p>
                                            @item.Qty
                                        </p>
                                        <div class="options">
                                            <h6>
                                                $@item.Price
                                            </h6>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                }


            </div>
        </div>
    </div>
</section>













